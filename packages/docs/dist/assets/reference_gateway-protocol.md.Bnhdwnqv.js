import{_ as i,o as a,c as s,ag as o}from"./chunks/framework.CbQjVMS6.js";const k=JSON.parse('{"title":"Gateway Protocol","description":"","frontmatter":{},"headers":[],"relativePath":"reference/gateway-protocol.md","filePath":"reference/gateway-protocol.md","lastUpdated":1770414290000}'),t={name:"reference/gateway-protocol.md"};function l(n,e,d,c,p,r){return a(),s("div",null,[...e[0]||(e[0]=[o(`<h1 id="gateway-protocol" tabindex="-1">Gateway Protocol <a class="header-anchor" href="#gateway-protocol" aria-label="Permalink to &quot;Gateway Protocol&quot;">​</a></h1><p><code>@yukita/gateway</code> uses one frame envelope:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;event|cmd|ack|err&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;t&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1738886400000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="commands-op-cmd" tabindex="-1">Commands (<code>op=cmd</code>) <a class="header-anchor" href="#commands-op-cmd" aria-label="Permalink to &quot;Commands (\`op=cmd\`)&quot;">​</a></h2><ul><li><code>play</code></li><li><code>pause</code></li><li><code>resume</code></li><li><code>stop</code></li><li><code>seek</code></li><li><code>volume</code></li><li><code>queue.add</code></li><li><code>queue.remove</code></li><li><code>queue.move</code></li><li><code>queue.clear</code></li><li><code>queue.shuffle</code></li><li><code>filters.apply</code></li><li><code>filters.clear</code></li><li><code>subscribe</code></li><li><code>unsubscribe</code></li></ul><h2 id="ack-op-ack" tabindex="-1">Ack (<code>op=ack</code>) <a class="header-anchor" href="#ack-op-ack" aria-label="Permalink to &quot;Ack (\`op=ack\`)&quot;">​</a></h2><ul><li><code>t</code>: command type echoed back.</li><li><code>id</code>: command correlation id.</li><li><code>d</code>: command result payload (usually player snapshot).</li></ul><h2 id="error-op-err" tabindex="-1">Error (<code>op=err</code>) <a class="header-anchor" href="#error-op-err" aria-label="Permalink to &quot;Error (\`op=err\`)&quot;">​</a></h2><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RATE_LIMITED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Command rate limit exceeded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;meta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="event-op-event" tabindex="-1">Event (<code>op=event</code>) <a class="header-anchor" href="#event-op-event" aria-label="Permalink to &quot;Event (\`op=event\`)&quot;">​</a></h2><p>Common stream topics:</p><ul><li><code>node</code></li><li><code>node:&lt;nodeId&gt;</code></li><li><code>context:&lt;contextId&gt;</code></li><li><code>context:&lt;contextId&gt;:player</code></li><li><code>context:&lt;contextId&gt;:track</code></li><li><code>context:&lt;contextId&gt;:queue</code></li></ul><p>On <code>subscribe</code> for <code>context:&lt;contextId&gt;</code>, gateway can emit immediate <code>snapshot</code> event.</p><h2 id="security" tabindex="-1">Security <a class="header-anchor" href="#security" aria-label="Permalink to &quot;Security&quot;">​</a></h2><p>Auth modes:</p><ul><li><code>jwt</code></li><li><code>hmac</code></li></ul><p>Roles:</p><ul><li><code>web:read</code></li><li><code>bot:control</code></li><li><code>admin</code></li></ul><p>Policy:</p><ul><li>Control commands require <code>bot:control</code> or <code>admin</code>.</li><li>Read subscriptions require <code>web:read</code> or <code>admin</code>.</li><li>Fixed-window rate limiting applies per session.</li><li>Optional <code>allowedOrigins</code> filter is enforced during handshake.</li></ul>`,20)])])}const u=i(t,[["render",l]]);export{k as __pageData,u as default};
